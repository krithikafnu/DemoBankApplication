"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[396],{396:(a,e,s)=>{s.r(e),s.d(e,{default:()=>i});var c=s(43),n=(s(114),s(916)),l=s(579);const i=function(a){let{searchParams:e}=a;const[s,i]=(0,c.useState)([]),[t,r]=(0,c.useState)(null),[d,o]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1),[m,j]=(0,c.useState)(!1),[x,u]=(0,c.useState)(null);return(0,c.useEffect)((()=>{(async()=>{const a=new URLSearchParams(e).toString(),s=a?`https://bankapplication-5y36.onrender.com/api/clients/search?${a}`:"https://bankapplication-5y36.onrender.com/api/clients",c=await fetch(s),n=await c.json();i(n)})()}),[e]),(0,l.jsxs)(n.P.div,{className:"table-wrapper",layout:!0,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.4},children:[(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"table-header",children:[(0,l.jsx)("th",{className:"row-header-name",children:"Name"}),(0,l.jsx)("th",{className:"row-header-birthday",children:"Birthday"}),(0,l.jsx)("th",{className:"row-header-type",children:"Type"}),(0,l.jsx)("th",{className:"row-header-account",children:"Account"}),(0,l.jsx)("th",{className:"row-header-balance",children:"Balance"}),(0,l.jsx)("th",{className:"row-header-actions",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:s.map(((a,e)=>(0,l.jsxs)("tr",{className:e%2===0?"row-background-odd":"row-background-even",children:[(0,l.jsx)("td",{className:"col-name",children:a.name}),(0,l.jsx)("td",{className:"col-birthday",children:a.birthday}),(0,l.jsx)("td",{className:"col-type",children:a.type}),(0,l.jsx)("td",{className:"col-account",children:a.account}),(0,l.jsxs)("td",{className:"col-balance",children:["$",a.balance.toFixed(2)]}),(0,l.jsxs)("td",{className:"col-actions",children:[(0,l.jsx)("button",{className:"action-link",onClick:()=>(async a=>{const e=await fetch(`https://bankapplication-5y36.onrender.com/api/clients/${a}`),s=await e.json();r(s),o(!0)})(a.account),children:"Details"}),(0,l.jsx)("span",{children:" | "}),(0,l.jsx)("button",{className:"action-link",onClick:()=>p(!0),children:"Transfer"}),(0,l.jsx)("span",{children:" | "}),(0,l.jsx)("button",{className:"action-link",onClick:()=>{u(a.account),j(!0)},disabled:"disabled"===a.status,children:"Close Account"})]})]},e)))})]})}),d&&t&&(0,l.jsx)("div",{className:"popup-overlay",children:(0,l.jsxs)("div",{className:"client-details-popup",children:[(0,l.jsxs)("div",{className:"popup-header",children:[(0,l.jsx)("h3",{children:"Client Details"}),(0,l.jsx)("button",{onClick:()=>o(!1),children:"X"})]}),(0,l.jsxs)("div",{className:"popup-content",children:[(0,l.jsxs)("div",{className:"detail-row",children:[(0,l.jsx)("span",{className:"detail-label",children:"Name:"}),(0,l.jsx)("span",{children:t.name})]}),(0,l.jsxs)("div",{className:"detail-row",children:[(0,l.jsx)("span",{className:"detail-label",children:"Account:"}),(0,l.jsx)("span",{children:t.account})]}),(0,l.jsxs)("div",{className:"detail-row",children:[(0,l.jsx)("span",{className:"detail-label",children:"Balance:"}),(0,l.jsxs)("span",{children:["$",t.balance.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"detail-row",children:[(0,l.jsx)("span",{className:"detail-label",children:"Email:"}),(0,l.jsx)("span",{children:t.email})]}),(0,l.jsxs)("div",{className:"detail-row",children:[(0,l.jsx)("span",{className:"detail-label",children:"Phone:"}),(0,l.jsx)("span",{children:t.phoneNumber})]}),(0,l.jsxs)("div",{className:"detail-row",children:[(0,l.jsx)("span",{className:"detail-label",children:"Status:"}),(0,l.jsx)("span",{children:t.status})]}),(0,l.jsxs)("div",{className:"detail-row",children:[(0,l.jsx)("span",{className:"detail-label",children:"Member Since:"}),(0,l.jsx)("span",{children:t.member_since})]})]})]})}),h&&(0,l.jsx)("div",{className:"popup-overlay",children:(0,l.jsxs)("div",{className:"transfer-popup",children:[(0,l.jsxs)("div",{className:"popup-header",children:[(0,l.jsx)("h3",{children:"Transfer Account"}),(0,l.jsx)("button",{onClick:()=>p(!1),children:"X"})]}),(0,l.jsxs)("div",{className:"popup-content",children:[(0,l.jsx)("p",{children:"Only regional managers can transfer accounts."}),(0,l.jsx)("p",{children:"Please contact admin department for access."})]})]})}),m&&(0,l.jsx)("div",{className:"popup-overlay",children:(0,l.jsxs)("div",{className:"confirm-popup",children:[(0,l.jsxs)("div",{className:"popup-header",children:[(0,l.jsx)("h3",{children:"Confirm Account Closure"}),(0,l.jsx)("button",{onClick:()=>j(!1),children:"X"})]}),(0,l.jsxs)("div",{className:"popup-content",children:[(0,l.jsx)("p",{children:"Are you sure you want to close this account?"}),(0,l.jsxs)("div",{className:"button-group",children:[(0,l.jsx)("button",{className:"confirm-button",onClick:async()=>{try{(await fetch(`https://bankapplication-5y36.onrender.com/api/clients/${x}/close`,{method:"PATCH"})).ok&&i(s.map((a=>a.account===x?{...a,status:"disabled"}:a))),j(!1)}catch(a){console.error("Error closing account:",a)}},children:"Confirm"}),(0,l.jsx)("button",{className:"cancel-button",onClick:()=>j(!1),children:"Cancel"})]})]})]})})]})}}}]);
//# sourceMappingURL=396.cf8769b7.chunk.js.map